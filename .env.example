# ============================================================================
# CartIQ Backend - Environment Variables
# ============================================================================
# Copy this file to .env and fill in your values:
#   cp .env.example .env
#
# NEVER commit .env to git - it contains secrets!
# ============================================================================

# ============================================================================
# GCP CONFIGURATION
# ============================================================================

# Your GCP project ID (e.g., "cartiq-hackathon-2025")
GCP_PROJECT_ID=your-project-id

# GCP region (us-central1 recommended for Vertex AI)
GCP_LOCATION=us-central1

# Path to service account key JSON file
# For local dev: ./cartiq-sa-key.json
# For Cloud Run: Leave empty (uses attached service account)
GOOGLE_APPLICATION_CREDENTIALS=./cartiq-sa-key.json

# ============================================================================
# CONFLUENT CLOUD (KAFKA)
# ============================================================================

# Bootstrap servers (from Confluent Cloud console)
# Format: pkc-xxxxx.us-central1.gcp.confluent.cloud:9092
CONFLUENT_BOOTSTRAP_SERVERS=pkc-xxxxx.region.provider.confluent.cloud:9092

# ============================================================================
# VERTEX AI VECTOR SEARCH (RAG)
# ============================================================================

# Index endpoint (from: gcloud ai index-endpoints list)
# Format: projects/{project}/locations/{location}/indexEndpoints/{endpoint-id}
VECTOR_SEARCH_INDEX_ENDPOINT=projects/your-project/locations/us-central1/indexEndpoints/1234567890

# Deployed index ID (the ID you used when deploying the index to the endpoint)
# This is used for QUERYING the index
VECTOR_SEARCH_DEPLOYED_INDEX_ID=cartiq_products_deployed

# API endpoint for Vector Search QUERIES (public endpoint)
# Format: {numeric-id}.{location}-{project-number}.vdb.vertexai.goog:10000
# Find this in: Vertex AI > Vector Search > Index Endpoints > your-endpoint > Public endpoint domain name
VECTOR_SEARCH_API_ENDPOINT=1234567890.us-central1-123456789012.vdb.vertexai.goog:10000

# Index ID for UPSERTING datapoints (different from deployed index ID)
# Find this in: Vertex AI > Vector Search > Indexes > your-index > Index ID (numeric)
VECTOR_SEARCH_INDEX_ID=1234567890123456789

# ============================================================================
# REDIS CACHE (EMBEDDING CACHE)
# ============================================================================

# Redis host (from: gcloud redis instances describe cartiq-cache)
# For Memorystore: Internal IP (e.g., 10.0.0.3)
# For local: localhost
REDIS_HOST=localhost

# Redis port (default: 6379)
REDIS_PORT=6379

# ============================================================================
# ADMIN USER (Optional - creates admin on startup)
# ============================================================================

# Leave empty to skip admin creation
# ADMIN_PASSWORD is stored in Secret Manager (see below)
ADMIN_EMAIL=admin@cartiq.com
ADMIN_FIRST_NAME=Admin
ADMIN_LAST_NAME=User

# ============================================================================
# APPLICATION
# ============================================================================

# Active Spring profile (dev, prod)
SPRING_PROFILES_ACTIVE=dev

# Server port
SERVER_PORT=8082

# CORS allowed origins (comma-separated)
# Development: http://localhost:3000,http://localhost:5173
# Production: https://cartiq-xxx.web.app
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173

# ============================================================================
# RAG CONFIGURATION
# ============================================================================

# Enable/disable RAG features
RAG_ENABLED=true

# Embedding model
RAG_EMBEDDING_MODEL=text-embedding-004
RAG_EMBEDDING_DIMENSIONS=768

# Retrieval settings
RAG_RETRIEVAL_TOP_K=50
RAG_RETRIEVAL_FINAL_RESULTS=10
RAG_RETRIEVAL_SIMILARITY_THRESHOLD=0.7

# Re-ranking
RAG_RERANKING_ENABLED=true
RAG_RERANKING_MODEL=semantic-ranker-512@latest

# Cache TTLs (in hours)
RAG_CACHE_PRODUCT_TTL_HOURS=24
RAG_CACHE_QUERY_TTL_HOURS=1

# ============================================================================
# LOGGING
# ============================================================================

# Log levels: TRACE, DEBUG, INFO, WARN, ERROR
LOG_LEVEL_APP=DEBUG
LOG_LEVEL_KAFKA=WARN

# ============================================================================
# SECRETS (Stored in GCP Secret Manager)
# ============================================================================
# These secrets should be stored in GCP Secret Manager for production.
# For LOCAL DEVELOPMENT ONLY, you can set them here.
#
# Create secrets in GCP:
#   gcloud secrets create jwt-secret --data-file=-
#   gcloud secrets create confluent-api-key --data-file=-
#   gcloud secrets create confluent-api-secret --data-file=-
#   gcloud secrets create admin-password --data-file=-
#
# Access for local dev:
#   gcloud secrets versions access latest --secret=jwt-secret
#
# Cloud Run deployment (secrets injected automatically):
#   gcloud run deploy cartiq-backend \
#     --set-secrets=JWT_SECRET=jwt-secret:latest \
#     --set-secrets=CONFLUENT_API_KEY=confluent-api-key:latest \
#     --set-secrets=CONFLUENT_API_SECRET=confluent-api-secret:latest \
#     --set-secrets=ADMIN_PASSWORD=admin-password:latest

# FOR LOCAL DEVELOPMENT ONLY - DO NOT COMMIT REAL VALUES
JWT_SECRET=local-dev-only-replace-in-production
CONFLUENT_API_KEY=local-dev-only
CONFLUENT_API_SECRET=local-dev-only
ADMIN_PASSWORD=local-dev-only

# ============================================================================
# CLOUD RUN SPECIFIC (Production only)
# ============================================================================

# VPC Connector for Redis access (created in GCP)
# VPC_CONNECTOR=projects/your-project/locations/us-central1/connectors/cartiq-connector

# ============================================================================
