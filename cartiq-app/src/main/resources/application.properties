# ============================================
# CONFLUENT CLOUD CONFIGURATION
# ============================================
# Get these from your Confluent Cloud console
# Use the trial code: CONFLUENTDEV1

spring.kafka.bootstrap-servers=${CONFLUENT_BOOTSTRAP_SERVERS:localhost:9092}

# Confluent Cloud Authentication
confluent.api.key=${CONFLUENT_API_KEY:}
confluent.api.secret=${CONFLUENT_API_SECRET:}

# Consumer config
spring.kafka.consumer.group-id=cartiq-group
spring.kafka.consumer.auto-offset-reset=earliest

# ============================================
# GOOGLE CLOUD VERTEX AI CONFIGURATION
# ============================================
# Get these from your Google Cloud Console

vertex.ai.project-id=${GCP_PROJECT_ID:}
vertex.ai.location=${GCP_LOCATION:us-central1}
vertex.ai.endpoint=${VERTEX_AI_ENDPOINT:}

# For local development, you can use Application Default Credentials
# Run: gcloud auth application-default login

# ============================================
# APPLICATION CONFIGURATION
# ============================================
spring.profiles.active=${SPRING_PROFILES_ACTIVE:dev}
server.port=8082

# CORS Configuration - set CORS_ALLOWED_ORIGINS for production
cors.allowed-origins=${CORS_ALLOWED_ORIGINS:http://localhost:3000,http://localhost:5173}

# ============================================
# DATABASE CONFIGURATION
# ============================================
# H2 for development (in-memory)
spring.datasource.url=jdbc:h2:mem:cartiqdb;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=

# JPA/Hibernate
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false

# H2 Console (for development)
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console

# ============================================
# JACKSON (JSON) CONFIGURATION
# ============================================
spring.jackson.mapper.accept-case-insensitive-enums=true

# ============================================
# LOGGING
# ============================================
logging.level.com.cartiq=DEBUG
logging.level.org.apache.kafka=WARN

# ============================================
# JWT CONFIGURATION
# ============================================
# SECURITY WARNING: Set JWT_SECRET environment variable in production!
# The default value is ONLY for local development.
jwt.secret=${JWT_SECRET:dev-only-secret-key-change-in-production-must-be-at-least-256-bits}
jwt.expiration=86400000

# ============================================
# ACTUATOR
# ============================================
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=when_authorized

# ============================================
# ADMIN INITIALIZATION
# ============================================
# Set these environment variables to create an admin user on startup.
# The admin is only created if:
#   1. ADMIN_EMAIL is set (not empty)
#   2. ADMIN_PASSWORD is set (min 8 characters)
#   3. No user with that email already exists
#
# In GCP Cloud Run, use Secret Manager for ADMIN_PASSWORD:
#   gcloud run deploy cartiq --set-secrets=ADMIN_PASSWORD=admin-password:latest
#
app.admin.email=${ADMIN_EMAIL:}
app.admin.password=${ADMIN_PASSWORD:}
app.admin.first-name=${ADMIN_FIRST_NAME:Admin}
app.admin.last-name=${ADMIN_LAST_NAME:User}
